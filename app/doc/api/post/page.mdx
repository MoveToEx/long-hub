
## GET /api/post/

Get a list of posts within given range.  

Search Parameters:

- `offset`: Skip the first # posts. Defaults to 0.
- `limit`: Controls maximum count of posts to return. Defaults to 24.  

Example request:

```http
GET /api/post/?offset=0&limit=1
```

Example response:

```json
{
    "count": 684,
    "data": [
        {
            "imageURL": "http://localhost:3042/posts/6c753c5e-baca-4f1b-a4ed-952dd402d36c.png",
            "id": "6c753c5e-baca-4f1b-a4ed-952dd402d36c",
            "text": "我哭了我装的",
            "image": "6c753c5e-baca-4f1b-a4ed-952dd402d36c.png",
            "imageHash": "1110001011010101000110011010101011100110010110011011001010110111",
            "aggr": 0,
            "createdAt": "2023-12-19T06:50:28.871Z",
            "updatedAt": "2023-12-19T06:50:28.906Z",
            "uploaderId": 1,
            "tags": [
                {
                    "id": 229,
                    "name": "cry"
                }
            ]
        }
    ]
}
```

## POST /api/post

Create a new post.   

Requires write permission (0x2).

Formdata:

- `image`: Image to upload  
- `metadata`: A JSON string specifying the metadata
- (_optional_)`force`: Whether to ignore similar images

Response: If succeeds, a JSON object containing the id of the new post.  
    Otherwise, a JSON object or a string indicating the the cause of the failure.

Example request:

```http
POST /api/post
Content-Type: multipart/form-data; boundary=NMSL
X-Access-Key: <KEY>

--NMSL
Content-Disposition: form-data; name="image"; filename="image.jpg"
Content-Type: image/jpeg

< ./image.jpg
--NMSL
Content-Disposition: form-data; name="metadata"
Content-Type: text/plain

{
    "text": "nmsl",
    "aggr": 0.5,
    "tags": [
        "monochrome"
    ]
}
--NMSL
Content-Disposition: form-data; name="force"
Content-Type: text/plain

0
--NMSL--
```

Example response when succeeds:

```http
HTTP/1.1 200 OK
vary: RSC, Next-Router-State-Tree, Next-Router-Prefetch, Next-Url
content-type: application/json
Date: Fri, 09 Feb 2024 01:07:23 GMT
Connection: close
Transfer-Encoding: chunked

{
    "imageURL": "http://localhost:3042/posts/494784be-70a8-4236-8879-67c229644d98.jpg",
    "id": "494784be-70a8-4236-8879-67c229644d98",
    "text": "nmsl",
    "aggr": 0.5,
    "imageHash": "1100001111000010010010100000101001101101011010001011011100101001",
    "image": "494784be-70a8-4236-8879-67c229644d98.jpg",
    "updatedAt": "2024-02-09T01:07:23.642Z",
    "createdAt": "2024-02-09T01:07:23.638Z",
    "uploaderId": 1
}
```

Example response when conflicts:

```http
HTTP/1.1 409 Conflict
vary: RSC, Next-Router-State-Tree, Next-Router-Prefetch, Next-Url
content-type: application/json
Date: Fri, 09 Feb 2024 01:08:01 GMT
Connection: close
Transfer-Encoding: chunked

[
    {
        "imageURL": "http://localhost:3042/posts/494784be-70a8-4236-8879-67c229644d98.jpg",
        "id": "494784be-70a8-4236-8879-67c229644d98",
        "imageHash": "1100001111000010010010100000101001101101011010001011011100101001",
        "image": "494784be-70a8-4236-8879-67c229644d98.jpg"
    }
]
```